(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{165:function(t,a,e){"use strict";e.r(a);var s={name:"AdminCreateSettingType",data:function(){return{data:{name:"",_key:""},title:"Dodaj własny type ustawień"}},methods:{save:function(){var t=this;this.$axios.post("admin/settings/types/create",this.data).then((function(a){1===a.data.success&&(t.$emit("loadData"),t.data.name="",t.data._key="",t.closeModal())}))},openModal:function(){this.$refs["create-setting-type"].show()},closeModal:function(){this.$refs["create-setting-type"].hide()}}},i=e(0),o={name:"AdminDataSetting",components:{AdminCreateSettingType:Object(i.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-modal",{ref:"create-setting-type",attrs:{"hide-footer":"",title:t.title}},[e("form",{on:{submit:function(a){return a.preventDefault(),t.save(a)}}},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",placeholder:"Nazwa","aria-label":"Nazwa"},domProps:{value:t.data.name},on:{input:function(a){a.target.composing||t.$set(t.data,"name",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data._key,expression:"data._key"}],staticClass:"form-control",attrs:{id:"type",type:"text",placeholder:"Typ","aria-label":"Type"},domProps:{value:t.data._key},on:{input:function(a){a.target.composing||t.$set(t.data,"_key",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("b-button",{attrs:{variant:"outline-secondary",type:"submit"}},[t._v("Zapisz")])],1)])])}),[],!1,null,"62f0682c",null).exports},data:function(){return{title:"Dodaj ustawienia",data:{type_id:"",resource_type:"",value:""},types:[],is_edit:!1}},methods:{loadDataTypes:function(){var t=this;this.$axios.get("admin/settings/types/all").then((function(a){t.types=a.data.data}))},addType:function(){this.$refs.adminCreateSettingType.openModal()},save:function(){if(1==this.data.resource_type)return this.saveData(this.data);this.data.value=this.$refs.files.files;var t=new FormData,a=this.data.value;return t.append("value",a[0],a.name),t.append("type_id",this.data.type_id),t.append("resource_type",this.data.resource_type),this.saveData(t)},saveData:function(t){var a=this,e="admin/settings/create";this.$route.params.id&&(e="admin/settings/update/".concat(this.$route.params.id)),this.$axios.post(e,t).then((function(t){1===t.data.success&&(a.data.type_id="",a.data.value="",a.data.resource_type="",a.$notify({group:"notification-success",title:"Udało się",text:"Dane zostały zapisane"}))}))}},created:function(){var t=this;this.loadDataTypes(),"edit"===this.$route.params.action&&this.$route.params.id&&this.$axios.get("admin/settings/find/".concat(this.$route.params.id)).then((function(a){var e=a.data.data;t.data.type_id=e.type.id,t.data.resource_type=e.resource_type,t.data.value=e.value,t.is_edit=!0}))}},n=Object(i.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"admin-page"},[e("h5",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),e("div",{staticClass:"options"},[e("b-button",{attrs:{variant:"outline-secondary"},on:{click:t.addType}},[e("span",{staticClass:"fa fa-plus",attrs:{title:"Dodaj typ"}})]),t._v(" "),e("b-button",{attrs:{to:{name:"AdminPageSetting"},variant:"outline-danger",title:"Anuluj"}},[e("span",{staticClass:"fa fa-times"})])],1),t._v(" "),e("div",{staticClass:"content mt-4 mb-5"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.save(a)}}},[e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-xl-5 col-lg-5 col-md-5 col-xs-12 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.data.type_id,expression:"data.type_id"}],staticClass:"form-control",attrs:{disabled:!0===t.is_edit,id:"type","aria-label":"Wybierz typ"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data,"type_id",a.target.multiple?e:e[0])}}},[e("option",{attrs:{selected:"",value:""}},[t._v("Wybierz typ")]),t._v(" "),t._l(t.types,(function(a){return e("option",{domProps:{value:a.id}},[t._v(t._s(a.name))])}))],2)]),t._v(" "),e("div",{staticClass:"col-xl-2 col-lg-2 col-md-2 col-xs-12 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.data.resource_type,expression:"data.resource_type"}],staticClass:"form-control",attrs:{id:"selectType","aria-label":"Wybierz typ"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data,"resource_type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{selected:"",value:""}},[t._v("Wybierz rodzaj")]),t._v(" "),e("option",{attrs:{value:"1"}},[t._v("Tekst")]),t._v(" "),e("option",{attrs:{value:"2"}},[t._v("Plik")])])]),t._v(" "),e("div",{staticClass:"col-xl-5 col-lg-5 col-md-5 col-xs-12 col-sm-12"},[1==t.data.resource_type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.value,expression:"data.value"}],staticClass:"form-control",attrs:{id:"value","aria-label":"Wartość",placeholder:"Wartość"},domProps:{value:t.data.value},on:{input:function(a){a.target.composing||t.$set(t.data,"value",a.target.value)}}}):t._e(),t._v(" "),2==t.data.resource_type?e("b-form-group",{attrs:{label:"Wbierz plik:","label-for":"file-default","label-cols-sm":"2"}},[e("b-form-file",{ref:"files",attrs:{id:"file-default"}})],1):t._e()],1)]),t._v(" "),e("div",{staticClass:"form-group"},[e("b-button",{attrs:{type:"submit",variant:"outline-secondary"}},[t._v("Zapisz")])],1)])]),t._v(" "),e("admin-create-setting-type",{ref:"adminCreateSettingType",on:{loadData:t.loadDataTypes}})],1)}),[],!1,null,"67c88fb2",null);a.default=n.exports}}]);